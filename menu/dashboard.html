<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelompok 24 Balikpapan 2024</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>Pizza Sales Report Team 24 Balikpapan</h1>
        <nav>
            <ul>
                <li>Settings</li>
                <li>Graphs</li>
                <li>Default</li>
            </ul> 
        </nav>
        
        <!-- Left Sidebar -->
        <section>
            <h2>Pengaturan</h2>
            <div>
                <label>Lebar Halaman: 85%</label>
                <input type="range" min="10" max="100" value="85">
            </div>
            <div>
                <label>Tinggi Sidebar: 100vh</label>
                <input type="range" min="40" max="100" value="100">
            </div>
            <div>
                <label>Lebar Chart: 30%</label>
                <input type="range" min="10" max="51" value="30">
            </div>
            <div>
                <label>Warna Chart: #dc6b29</label>
                <input type="color" value="#dc6b29">
            </div>
        </section>
        
        <!-- Right Sidebar -->
        <section>
            <h2>Halaman Tabel</h2>
            <div>
                <label>Pilih Jenis Filter</label>
                <select>
                    <option value="0">Jam</option>
                    <option value="1">Hari</option>
                    <option value="2">Hari Bulan</option>
                    <option value="3" selected>Bulan</option>
                    <option value="4">Quarter</option>
                    <option value="5">Size</option>
                    <option value="6">Category</option>
                    <option value="7">Type</option>
                </select>
            </div>
            <div>
                <label>Pilih Jenis Sort</label>
                <select>
                    <option value="6969">None</option>
                    <option value="0">Revenue</option>
                    <option value="1">Orders</option>
                    <option value="2">Unique Orders</option>
                </select>
            </div>
            <div>
                <label>Bulan Minimal: 1</label>
                <input type="range" min="1" max="12" value="1">
            </div>
            <div>
                <label>Bulan Maksimal: 12</label>
                <input type="range" min="1" max="12" value="12">
            </div>
            <div>
                <label>Pilih Jenis Chart</label>
                <select>
                    <option value="0">Single Chart</option>
                    <option value="1">Multi Chart</option>
                </select>
            </div>
            <div>
                <label>Pilih Tipe Chart</label>
                <select>
                    <option value="bar" selected>Bar Chart</option>
                    <option value="line">Line Chart</option>
                    <option value="pie">Pie Chart</option>
                    <option value="doughnut">Doughnut Chart</option>
                    <option value="radar">Radar Chart</option>
                    <option value="polarArea">Polar Area Chart</option>
                </select>
            </div>
            <div id="name_selection">
                <span>Seleksi Nama</span>
                <p>Revenue</p>
                <p>Pizza Order</p>
                <p>Pizza Order ID</p>
            </div>

            <div>
                <span>Atur Chart</span>
                <button>Tambah Chart</button>
                <button>Refresh Chart</button>
                <button>Hapus Semua Chart</button>
            </div>
        </section>
    </header>

    <!-- Chart Cintainer -->
    <main></main>

    <!-- Misc -->
    <aside></aside>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Kelompok 24 Balikpapan.</p>
        <div class="social-icons">
            <a href="https://www.facebook.com" class="facebook" target="_blank"></a>
            <a href="https://www.twitter.com" class="twitter" target="_blank"></a>
            <a href="https://www.instagram.com" class="instagram" target="_blank"></a>
            <a href="https://www.linkedin.com" class="linkedin" target="_blank"></a>
        </div>
        <p>Website by <a href="../index.html">Team 24 Balikpapan Ilmu Padi Kawan</a></p>
    </footer>


    <!-- Internal Javascript -->
    <script>      
        // Menambahkan elemen main
        const mainFrame = document.querySelector('body main');
        // Mendapatkan elemen dom navbar dan sidebar
        const navLists = document.querySelector('body header nav ul').querySelectorAll('li');
        const sideBars = document.querySelector('body header').querySelectorAll('section');
    </script>


    <!-- External Javascript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" ></script>
    <script src="../js/global.js"></script>
    <script src="../js/manual.js"></script>
    <script src="../js/functions.js" ></script>
    <script src="../js/load.js" ></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Internal Javascript -->
    <script>
        AOS.init();
        // Operasi sidebar
        for (let i = 0; i < sideBars.length; i++) {
            navLists[i].addEventListener('click', function() {
                toggleDisplay(sideBars[i]);
            });
            sidebarInput[i] = sideBars[i].querySelectorAll('input, select, button');
            sidebarLabel[i] = sideBars[i].querySelectorAll('label');
        };

        navLists[2].addEventListener('click', function() {
            loadDefaultProcedure(mainFrame);
        });

        // Operasi warna navbar
        for (let i = 0; i < sideBars.length; i++) {
            navLists[i].addEventListener('click', function() {
                toggleColor2(navLists[i]);
            });
        };

        //index sidebar kiri
        const indexPageWidth = 0;
        const sidebarHeight = 1;
        const charWidth = 2;
        const chartColor = 3;


        //index sidebar lanan
        const filterIndex = 0;
        const sortIndex = 1;
        const minIndex = 2;
        const maxIndex = 3;
        const chartTypeIndex = 4;
        const chartType2Index = 5;
        const addChartIndex = 6;
        const refreshChartIndex = 7;
        const removeChartIndex = 8;

        // Menambahkan label responsif dan fungsi pada setiap input sidebar
        // Sidebar kiri
        sidebarInput[0][indexPageWidth].oninput = function() {
            pageParameters.pageWidth = parseInt(sidebarInput[0][indexPageWidth].value);
            mainFrame.style.width = pageParameters.pageWidth + "%";
            sidebarLabel[0][indexPageWidth].innerHTML = labelNames[0][indexPageWidth] + ": " + pageParameters.pageWidth + "%";
            AOS.refresh();
        };
        sidebarInput[0][sidebarHeight].oninput = function() {
            pageParameters.sidebarWidth = parseInt(sidebarInput[0][sidebarHeight].value);
            sideBars[0].style.height = pageParameters.sidebarWidth + "vh";
            sideBars[sidebarHeight].style.height = pageParameters.sidebarWidth + "vh";
            sidebarLabel[0][sidebarHeight].innerHTML = labelNames[0][sidebarHeight] + ": " + pageParameters.sidebarWidth + "vh";
        };
        sidebarInput[0][charWidth].oninput = function() {
            chartParameters.chartWidth = parseInt(sidebarInput[0][charWidth].value);
            let main2 = document.querySelector('body main');
            main2.style.gridTemplateColumns = "repeat(auto-fit, minmax(" + chartParameters.chartWidth + "%, 1fr))";
            sidebarLabel[0][charWidth].innerHTML = labelNames[0][charWidth] + ": " + chartParameters.chartWidth + "%";
            AOS.refresh();
        };
        sidebarInput[0][chartColor].oninput = function() {
            chartParameters.chartColor = sidebarInput[0][chartColor].value.toString();
            sidebarLabel[0][chartColor].innerHTML = labelNames[0][chartColor] + ": " + chartParameters.chartColor;
        };

        // Sidebar kanan
        //mengatur jenis filter
        sidebarInput[1][filterIndex].oninput = function() {
            let val = parseInt(sidebarInput[1][filterIndex].value);
            chartParameters.datasetIndex = val;

            setRangeLimits(sidebarInput, [1,minIndex,maxIndex]);
            setAllLabelNames(val);

            sidebarLabel[1][minIndex].innerHTML = labelNames[1][minIndex] + ": " + setLabelData(sidebarInput[1][filterIndex].value, sidebarInput[1][minIndex].value);
            sidebarLabel[1][maxIndex].innerHTML = labelNames[1][maxIndex] + ": " + setLabelData(sidebarInput[1][filterIndex].value, sidebarInput[1][maxIndex].value);
            sidebarInput[1][minIndex].value = chartParameters.minValue;
            sidebarInput[1][maxIndex].value = chartParameters.maxValue;

        };

        sidebarInput[1][sortIndex].oninput = function() {
            let val = sidebarInput[1][sortIndex].value;
            sortAllData(val);
        };

        sidebarInput[1][minIndex].oninput = function() {
            chartParameters.minValue = parseInt(sidebarInput[1][minIndex].value);
            sidebarLabel[1][minIndex].innerHTML = labelNames[1][minIndex] + ": " + setLabelData(sidebarInput[1][filterIndex].value, sidebarInput[1][minIndex].value);
            
        };

        sidebarInput[1][maxIndex].oninput = function() {
            chartParameters.maxValue = parseInt(sidebarInput[1][maxIndex].value);
            sidebarLabel[1][maxIndex].innerHTML = labelNames[1][maxIndex] + ": " + setLabelData(sidebarInput[1][filterIndex].value, sidebarInput[1][maxIndex].value);
         
        };
        sidebarInput[1][chartTypeIndex].oninput = function() {
            chartParameters.chartDisplayType = parseInt(sidebarInput[1][chartTypeIndex].value);
        };
        sidebarInput[1][chartType2Index].oninput = function() {
            chartParameters.chartType = sidebarInput[1][chartType2Index].value;
        };
        sidebarInput[1][addChartIndex].onclick = function() {
            
            if(chartParameters.nameSelections.length != 0){

                loadIndividualChart(dataset[chartParameters.datasetIndex], chartParameters.chartType);
                renderCharts(mainFrame);

            };

        };
        sidebarInput[1][refreshChartIndex].onclick = function() {
            renderCharts(mainFrame);
        };
        sidebarInput[1][removeChartIndex].onclick = function() {
            removeAllChartSection(mainFrame);
            mainCharts = [];
        };


        //seleksi nama metric
        const name_container = document.getElementById("name_selection");
        let inputSelections = name_container.querySelectorAll("p");

        function handleClick(event) {
        
            toggleColor(event.target);
            chartParameters.nameSelections = [];

            inputSelections.forEach(selection => {
                if(selection.className == 'highlight1'){
                    chartParameters.nameSelections.push(selection.innerText.toLowerCase());
                };
            });

        };

        inputSelections.forEach(selection => {
            selection.addEventListener('click', handleClick);
        });


        //toggle tombol dahsboard
        const headerH1 = document.querySelector('body header h1');
        const headerUlLi = document.querySelector('body header nav ul');

        headerH1.onclick = function(){
            toggleDisplayFlex(headerUlLi);
        };

    </script>

    <!-- External Javascript -->
    <script src="../js/main.js"></script>
</body>
</html>
